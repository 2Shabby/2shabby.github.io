<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Not Found | My Site</title>
    <style>
        /* Inline critical styles for 404 - ensures it works standalone */
        :root {
            --color-bg: #ffffff;
            --color-text: #1a1a2e;
            --color-primary: #4361ee;
            --color-secondary: #3f37c9;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #1a1a2e;
                --color-text: #e8e8e8;
                --color-primary: #7b8cff;
                --color-secondary: #a5b4fc;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }
        h1 { font-size: 4rem; margin-bottom: 1rem; }
        p { font-size: 1.25rem; margin-bottom: 2rem; max-width: 500px; }
        a {
            color: var(--color-primary);
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--color-primary);
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }
        a:hover, a:focus {
            background: var(--color-primary);
            color: var(--color-bg);
        }
        .error-code { font-size: 8rem; font-weight: bold; opacity: 0.1; position: absolute; z-index: -1; }
    </style>
    <script>
        // GitHub Pages SPA redirect support
        // When a deep link is refreshed, GitHub serves 404.html
        // This script preserves the path for client-side routing
        (function() {
            // Only run on GitHub Pages (not local file://)
            if (window.location.protocol === 'file:') return;
            
            // Check if this is a navigation to a known page pattern
            var path = window.location.pathname;
            var search = window.location.search;
            var hash = window.location.hash;
            
            // Detect base path (for project sites)
            var segments = path.split('/').filter(Boolean);
            var basePath = '';
            
            // For project sites, the first segment is the repo name
            // User sites have no prefix
            if (window.location.hostname.endsWith('.github.io')) {
                var hostParts = window.location.hostname.split('.');
                var username = hostParts[0];
                // If first segment doesn't match username.github.io pattern for user site
                // and the path has segments, first might be repo name
                if (segments.length > 0) {
                    // Check if this looks like a project site
                    // Project site: username.github.io/repo-name/...
                    // User site: username.github.io/...
                    // We can't definitively know, so we store the full path
                }
            }
            
            // Store the attempted path for potential client-side handling
            sessionStorage.setItem('404-redirect-path', path + search + hash);
        })();
    </script>
</head>
<body>
    <span class="error-code" aria-hidden="true">404</span>
    <h1>Page Not Found</h1>
    <p>Sorry, the page you're looking for doesn't exist or has been moved.</p>
    <a href="/" id="home-link">Return to Homepage</a>
    
    <script>
        // Adjust home link for project sites
        (function() {
            var link = document.getElementById('home-link');
            var path = window.location.pathname;
            
            // Detect if we're on a project site
            if (window.location.hostname.endsWith('.github.io')) {
                var segments = path.split('/').filter(Boolean);
                // If there are segments and we're on github.io, first segment might be repo
                // For safety, we link to current origin root
                // The base-path.js will handle proper navigation on the main site
            }
            
            // For local file:// protocol, use relative path
            if (window.location.protocol === 'file:') {
                link.href = 'index.html';
            }
        })();
    </script>
    
    <noscript>
        <style>
            /* Ensure the page is still usable without JS */
            a { display: inline-block; margin-top: 1rem; }
        </style>
    </noscript>
</body>
</html>
