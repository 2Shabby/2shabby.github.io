{% comment %}
  SEO and Social Meta Tags
  Uses site.url and site.baseurl correctly for both user and project sites
{% endcomment %}

{% assign page_title = page.title | default: site.title %}
{% assign page_description = page.description | default: page.excerpt | default: site.description %}
{% assign page_description = page_description | strip_html | strip_newlines | truncate: 160 %}
{% assign page_url = page.url | absolute_url %}
{% assign page_image = page.image | default: site.image %}

<!-- Primary Meta Tags -->
<meta name="title" content="{{ page_title | escape }}">
<meta name="description" content="{{ page_description | escape }}">
{% if page.author %}
<meta name="author" content="{{ page.author }}">
{% elsif site.author.name %}
<meta name="author" content="{{ site.author.name }}">
{% endif %}
{% if page.keywords %}
<meta name="keywords" content="{{ page.keywords | join: ', ' }}">
{% endif %}

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
<meta property="og:url" content="{{ page_url }}">
<meta property="og:title" content="{{ page_title | escape }}">
<meta property="og:description" content="{{ page_description | escape }}">
<meta property="og:site_name" content="{{ site.title | escape }}">
{% if page_image %}
<meta property="og:image" content="{{ page_image | absolute_url }}">
{% endif %}
{% if page.layout == 'post' %}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
{% if page.modified %}
<meta property="article:modified_time" content="{{ page.modified | date_to_xmlschema }}">
{% endif %}
{% if page.author %}
<meta property="article:author" content="{{ page.author }}">
{% endif %}
{% endif %}

<!-- Twitter -->
<meta property="twitter:card" content="{% if page_image %}summary_large_image{% else %}summary{% endif %}">
<meta property="twitter:url" content="{{ page_url }}">
<meta property="twitter:title" content="{{ page_title | escape }}">
<meta property="twitter:description" content="{{ page_description | escape }}">
{% if page_image %}
<meta property="twitter:image" content="{{ page_image | absolute_url }}">
{% endif %}
{% if site.twitter_username %}
<meta property="twitter:site" content="@{{ site.twitter_username }}">
{% endif %}

<!-- Additional SEO -->
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
